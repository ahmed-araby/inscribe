{% extends '@App/base.html.twig' %}
{% set session = getCurrentSession() %}
{% block content %}
    <div class="row">
        Welcome {{ app.user.username }} , <a href="{{ path('fos_user_security_logout') }}">Logout ?</a>
    </div>
    <div class="row">
        Total logged in time today is : {{ getTodayPeriod() }}
    </div>
    <div class="row">
        Total logged in time this months is : {{ getMonthPeriod() }}
    </div>
    <div class="row">
        {% if session %}
            <div class="row">
                Time since started <div id="runner"></div>
            </div>

            <div class="row">
                <a href="{{ path('app_sign_out') }}" class="ui button two wide column">
                    <i class="stop icon"></i>
                    Stop
                </a>
            </div>
        {% else %}
            <a href="{{ path('app_sign_in') }}" class="ui button two wide column">
                <i class="play icon"></i>
                Start counting
            </a>
        {% endif %}
    </div>
{% endblock %}
{% block footerscripts %}
<script>
    {% if session %}
    $('#runner').runner({
        autostart: true,
        milliseconds: false,
        startAt: {{ session.getPassedMilliseconds() }} // alternatively you could just write: 60*1000
    });
    {% endif %}
</script>
{% endblock %}